<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KeyNoteLive</title>

    <link rel="stylesheet" href="vendors/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendors/fontawesome/css/font-awesome.min.css">

</head>
<body>

<div id="postFeed"></div>

<!-- <div style="margin-top: 100px;" class="well col-sm-12 col-md-10 col-lg-8 col-md-offset-1 col-lg-offset-2" id="result"></div> -->

<script src="vendors/jquery/jquery-1.11.1.min.js"></script>
<script src="vendors/bootstrap/js/bootstrap.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>

	(function() {
		console.log("DOM ready!");
    //Populate page with cache content.

    var socket = io('http://localhost');

    //Add event listeners
    socket.on('post', onPost);

    socket.on('like', function(id) {
      //increment the like counter of the like element identified by 'id'.
      $('#'+id).val();
    });
    socket.on('dislike', function(id) {
      //increment the dislike counter of the dislike element identified by 'id'.
      $('#'+id).val();
    });
    socket.on('update', function() {

    });
    socket.on('delete', function() {

    });

    var latestCachedKeynote = null;
    //Fetch the latest cached point of the keynote
    //Send it to the server.
    socket.emit('ready', latestCachedKeynote);
	})();

  function onPost(data) {
    //Populate keynote feed with post data
    //Create keynote post object and populate it with parsed data.
    var postContainer = document.createElement('div');
    var postAuthor = document.createElement('span');
    var postDate = document.createElement('span');
    var postContent = document.createElement('div');
    //postContainer.id = "";
    postContainer.appendChild(postAuthor);
    postContainer.appendChild(postDate);
    postContainer.appendChild(postContent);
    postAuthor.innerHTML = "Author: " + data.postAuthor;
    //postDate = data.postDate;
    postContent.innerHTML = data.postContent;
    //Push the Keynote object on the feed.
    $('#postFeed').prepend(postContainer);
    //Store it in the local cache.
  }

</script>

</body>
</html>
